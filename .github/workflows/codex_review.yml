name: Code Review

permissions:
  contents: read
  pull-requests: write

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: anc95/ChatGPT-CodeReview@main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          LANGUAGE: Japanese
          MODEL: gpt-3.5-turbo-16k
          PROMPT: |
            以下の観点でコードを詳細にレビューしてください:
            1. バグや潜在的な問題
            2. セキュリティ上の脆弱性
            3. パフォーマンスの問題
            4. コードの可読性と保守性
            5. ベストプラクティスからの逸脱
            6. Unity/C#特有の問題（該当する場合）
            
            具体的な改善提案と、その理由を含めてください。
            単なる「LGTM」ではなく、建設的なフィードバックを提供してください。
          MAX_TOKENS: 2000